# graber

网站爬虫脚本

# 爬虫框架

1. 确定目标网站
2. 分级整理首页导航菜单与尾页菜单
3. 做导航菜单爬虫，获取导航菜单数据
4. 验证导航菜单数据
5. （验证通过）导出菜单的表格数据
6. 进入分类，分析分类页面
7. 做分页爬虫，爬取商品信息
8. 如果分类商品信息不全，进入商品页面
9. 验证商品数据
10. （验证通过）导出所有商品表格数据
11. 数据清洗 去除重复商品等

# question

1. 需要导入的菜单的模板是怎么样的？？？ 这个还没有定，所以需要打开 shopyy.com 看看，做一个模板
2. 图片最好统一存到自己的图床上面去，避免 bug

# 商品信息采集

## 必要字段

| 必要字段 | 备注                                                                                                                                                                                                                                                                                                                         |
| -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 商品标题 | 最多 250 字符(同一商品的子款式标题与商品标题需一致，且中间请勿插入其他商品)                                                                                                                                                                                                                                                  |
| 商品属性 | 1.多款式商品：同一个商品的首行标题填入「M」（商品主体)；同一个商品的非首行标题填入「P」(子款式)；2.单一款式商品（Single）：填入「S」                                                                                                                                                                                         |
| 库存规则 | 「1」库存为 0 时不允许购买；「2」库存为 0 时允许购买；「3」库存为 0 时自动下架                                                                                                                                                                                                                                               |
| 商品售价 | 最多输入 9 位正整数，2 位小数                                                                                                                                                                                                                                                                                                |
| 商品图片 | 1.商品属性为 M(商品主体)与 S(单一款式商品)的行都必须至少填入一个图片 URL，支持填多个 URL 并用「英文逗号」隔开，默认填入的首个 URL 为商品主图 URL；2.商品属性为 P(子款式)的行仅支持一个 URL，填入多个时默认导入第一个，若不填入，则默认不需要图片；3.同一商品的部分子款式上传图片，则其余款式也需要上传，否则默认填入商品主图 |

## 可选字段

| 可选字段     | 备注                                                                     |
| ------------ | ------------------------------------------------------------------------ |
| 商品 ID      | 商品 ID 是系统生成的唯一标识符，新增商品无需填写                         |
| 创建时间     | 创建时间的时区为当前店铺设置的时区                                       |
| 商品类型     | 最多 60 字符                                                             |
| 商品副标题   | 最多 250 字符                                                            |
| 商品描述     | 上传不带样式，若需要样式，则输入 html 代码                               |
| 简短描述     | 最多 2000 字符                                                           |
| 内部商品名   | 最多 250 字符                                                            |
| 商品上架     | 「Y」:上架状态；「N」:下架状态；默认为「N」                              |
| 商品收税     | 「Y」:需要；「N」:不需要；默认为「N」                                    |
| 商品 spu     | 最多 60 字符                                                             |
| 虚拟销量值   | 最多输入六位数的自然数                                                   |
| 跟踪库存     | 「Y」:跟踪；「N」:不跟踪；默认为「N」                                    |
| 专辑名称     | 请填入已创建的手动专辑名称；多个专辑请用「英文逗号」隔开                 |
| 标签         | 最多输入 250 个标签，每个不得超过 255 字符，多个标签请用「英文逗号」隔开 |
| 供应商名称   | 最多 100 字符                                                            |
| 款式 1       | 最多 63 字符                                                             |
| 款式 2       | 最多 63 字符                                                             |
| 款式 3       | 最多 63 字符                                                             |
| 商品原价     | 最多输入 9 位正整数，2 位小数                                            |
| 商品 SKU     | 最多 511 字符                                                            |
| 商品重量(kg) | 最多输入 9 位正整数，4 位小数                                            |
| 商品条形码   | 最多 63 字符                                                             |
| 商品库存     | 最多输入 7 位整数                                                        |
| 变体备注 1   | 最多 512 字符                                                            |
| 变体备注 2   | 最多 512 字符                                                            |

## SEO 信息

| SEO 信息       | 备注                                                                                                                              |
| -------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| SEO 标题       | 最多 511 字符                                                                                                                     |
| SEO 描述       | 最多 20 字符                                                                                                                      |
| SEO URL Handle | 最多支持输入 255 字符（SEO URL handle 只对 SEO URL 的「URL 参数」部分进行更改，即"products/"后的内容，如：products/「URL 参数」） |
| SEO 关键词     | 多个关键词请用「英文逗号」隔开                                                                                                    |

`powershell
   python src/build_ks.py \
     --list-file output/category_270_raised2_list.xlsx \
     --template output/ks.xlsx \
     --min-progress 100 \
     --limit 10 \
     --max-rewards 3
   `
